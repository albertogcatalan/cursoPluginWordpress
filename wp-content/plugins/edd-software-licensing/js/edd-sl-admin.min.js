jQuery(document).ready(function($){var file_frame;$("#sl-retro-type").change(function(){var type=$(this).val(),target=$("#sl-retro-single-wrapper");"all"==type?target.hide():(target.show(),target.find(".edd-select-chosen").css("width","auto"))}),$(".edd-sl-adjust-limit").click(function(e){e.preventDefault();var button=$(this),data={action:"edd_sl_"+button.data("action")+"_limit",license:button.data("id"),download:button.data("download")};button.toggleClass("button-disabled"),$.post(ajaxurl,data,function(response,status){button.toggleClass("button-disabled"),$("#edd-sl-"+data.license+"-limit").text(response),$('span[data-parent="'+data.license+'"]').text(response)})}),$("#the-list .view_log a").click(function(){var data={action:"edd_sl_get_license_logs",license_id:$(this).data("license-id")},$thickboxLog=$("#license_log_"+data.license_id);"loaded"!=$thickboxLog.data("log-state")&&$.get(ajaxurl,data,function(response,status){$("#TB_ajaxContent").html(response),$thickboxLog.data("log-state","loaded")})}),$("input#edd_sl_disable_renewal_discount").on("change",function(){var checked=$(this).is(":checked"),target=$("#edd_sl_renewal_discount");checked?target.prop("readonly","readonly").prop("disabled","disabled"):target.removeProp("readonly").removeProp("disabled")}),$("select#_edd_product_type, input#edd_license_enabled, input#edd_sl_beta_enabled").on("change",function(){var product_type=$("#_edd_product_type").val(),license_enabled=$("#edd_license_enabled").is(":checked"),beta_enabled=$("#edd_sl_beta_enabled").is(":checked"),$toggled_rows=$(".edd_sl_toggled_row"),$beta_toggled_rows=$(".edd_sl_beta_toggled_row"),$beta_bundle_row=$(".edd_sl_beta_bundle_row"),$beta_no_bundle_row=$(".edd_sl_beta_no_bundle_row");if(!license_enabled)return $toggled_rows.hide(),void $("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated");beta_enabled?$beta_toggled_rows.show():$beta_toggled_rows.hide(),"bundle"==product_type?($toggled_rows.hide(),$toggled_rows.not(".edd_sl_nobundle_row").show(),$beta_toggled_rows.hide(),$("#edd_sl_beta_enabled").checked=!1,$beta_no_bundle_row.hide(),$beta_bundle_row.show()):($toggled_rows.show(),$beta_no_bundle_row.show(),$beta_bundle_row.hide()),$("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!1).trigger("chosen:updated")}),$("#edd_license_enabled").is(":checked")||$("#edd_sl_upgrade_paths input, #edd_sl_upgrade_paths select").prop("disabled",!0).trigger("chosen:updated"),$('input[name="edd_sl_is_lifetime"]').change(function(){1==$(this).val()?$("#edd_license_length_wrapper").hide():$("#edd_license_length_wrapper").show()}),$("#edit_expiration_is_lifetime").change(function(){$(this).is(":checked")?$("#edit_expiration_date").attr("disabled","disabled"):$("#edit_expiration_date").removeAttr("disabled")}),$("#edd_sl_upgrade_paths_wrapper").on("change","select.edd-sl-upgrade-path-download",function(){var $this=$(this),download_id=$this.val();if(0<parseInt(download_id)){var postData={action:"edd_check_for_download_price_variations",download_id:download_id};$.ajax({type:"POST",data:postData,url:ajaxurl,success:function(prices){if(""==prices)$this.parent().next().html(edd_sl.no_prices);else{var prev=$this.parent().next().find(".edd-sl-upgrade-path-price-id"),name="edd_sl_upgrade_paths["+$this.parent().parent().data("key")+"][price_id]";prices=prices.replace('name="edd_price_option"','name="'+name+'"'),prev.remove(),$this.parent().next().html(prices)}}}).fail(function(data){window.console&&window.console.log&&console.log(data)})}}),$("#edd_sl_upgrade_paths_wrapper").on("DOMNodeInserted",function(e){var target=$(e.target);target.is(".edd_repeatable_upload_wrapper")&&(target.find(".pricing").html(""),target.find(".sl-upgrade-prorate").find("input").attr("checked",!1))}),$(".edd_sl_upgrade_link").on("click",function(){$(this).select()}),$("#edd-sl-license-delete-confirm").change(function(){var submit_button=$("#edd-sl-delete-license");$(this).prop("checked")?submit_button.attr("disabled",!1):submit_button.attr("disabled",!0)}),$(".edd-sl-edit-license-exp-date").on("click",function(e){e.preventDefault(),function(link,input){link.text()===edd_sl.action_edit?(link.data("current-value",input.val()),link.text(edd_sl.action_cancel)):(input.val(link.data("current-value")),$("#edd_sl_update_license").fadeOut("fast",function(){$(this).css("display","none")}),link.text(edd_sl.action_edit))}($(this),$("input.edd-sl-license-exp-date")),$(".edd-sl-license-exp-date").toggle()}),$(".edd-sl-license-exp-date, #license_price_id").on("change",function(){$("#edd_sl_update_license").fadeIn("fast").css("display","inline-block")}),$("#edd-sl-regenerate-key").on("click",function(e){if(0!=confirm(edd_sl.regenerate_notice)){var license_key=$("#license-key"),target=$(this);target.css("color","#999").css("pointer-events","none");var postData={action:"edd_sl_regenerate_license",license_id:target.data("license-id"),nonce:target.data("nonce")};return $.ajax({type:"POST",data:postData,dataType:"json",url:ajaxurl,success:function(response){response.success?license_key.fadeTo("fast",".1",function(){license_key.text(response.key).fadeTo("fast","1",function(){target.css("color","").css("pointer-events","")})}):target.css("color","").css("pointer-events","")}}).fail(function(data){window.console&&window.console.log&&console.log(data)}),!1}}),$("#edd_sl_send_renewal_notice").on("click",function(e){e.preventDefault(),$(this).text()===edd_sl.send_notice?($(".edd-sl-license-card-notices").fadeIn("fast").css("display","table-row"),$(this).text(edd_sl.cancel_notice)):($(".edd-sl-license-card-notices").fadeOut("fast",function(){$(".edd-sl-license-card-notices").css("display","none")}),$(this).text(edd_sl.send_notice))}),$('.edd-sl-license-card-notices input[type="submit"]').on("click",function(e){e.preventDefault(),$(this).attr("disabled",!0),$(this).next(".spinner").css("visibility","visible");var postData={action:"edd_sl_send_renewal_notice",license_id:$(this).data("license-id"),notice_id:$("#edd_sl_renewal_notice").val()};return $.ajax({type:"POST",data:postData,dataType:"json",url:ajaxurl,success:function(response){if(!response.success)return!1;window.location=response.url}}).fail(function(data){window.console&&window.console.log&&console.log(data)}),!0}),window.formfield="",$(document.body).on("click",".edd_upload_banner_button",function(e){e.preventDefault();var button=$(this);window.formfield=$(this).closest(".edd_sl_banner_container"),file_frame||((file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:button.data("uploader-title"),button:{text:button.data("uploader-button-text")},multiple:!1})).on("menu:render:default",function(view){view.unset("library-separator"),view.unset("gallery"),view.unset("featured-image"),view.unset("embed"),view.set({})}),file_frame.on("insert",function(){file_frame.state().get("selection").each(function(attachment,index){attachment=attachment.toJSON(),window.formfield.find("input").val(attachment.url)})})),file_frame.open()}),window.formfield=""});